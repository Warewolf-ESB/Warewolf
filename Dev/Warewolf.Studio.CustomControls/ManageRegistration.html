<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="IE=edge">
    <title>Warewolf</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"
            integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://js.chargebee.com/v2/chargebee.js" data-cb-site="warewolf-test"></script>
    <link rel="stylesheet" href="styles/warewolf.css">
    <script type='text/javascript'>
        let subscriptionStatus = {
            NotActive: 0,
            Future: 1,
            InTrial: 2,
            Active: 3,
            NonRenewing: 4,
            Paused: 5,
            Cancelled: 6
        };
        const monthNames = ["January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"
        ];

        jQuery(document).ready(function () {

            let result = window.external.RetrieveSubscription();
            let objData = jQuery.parseJSON(result);

            let planId = objData.PlanId.toUpperCase();
            let planStatus = objData.Status;
            let trialEnd = objData.TrialEnd;
            $("#planId").text(planId);
            $("#planStatus").text(getStatus(planStatus));
            $(".close-btn").click(function (e) {
                e.preventDefault();
                window.external.CloseBrowser();
            });

            function getStatus(key) {
                switch (key) {
                    case 0:
                        return "Not Active";
                    case 1:
                        return "Future";
                    case 2:
                        let formattedDate = new Date(trialEnd);
                        let d = formattedDate.getDate();
                        let m = formattedDate.getMonth();
                        m += 1;  // JavaScript months are 0-11
                        let y = formattedDate.getFullYear();
                        let endDate = d + " " + monthNames[m] + " " + y;
                        return  "In Trial (Expires " + endDate + ")";
                    case 3:
                        return "Active";
                    case 4:
                        return "Non Renewing";
                    case 5:
                        return "Paused";
                    case 6:
                        return "Cancelled";
                }
                return subscriptionStatus[key];
            }
        });
    </script>
</head>
<body>
<div class="navbar navbar-static-top">
    <div class="container">
        <div class="navbar-header">
            <a href="https://www.warewolf.io"><img src="images/logo.png" height="auto" width="240px"/></a>
        </div>
    </div>
</div>
<div id="container" class="container">
    <div id="customer-info" class="row">
        <div class="col-sm-12">
            <div class="row">
                <div class="col-sm-12">
                    <div class="card">
                        <div class="card-header text-center">
                            <h4>Manage Your Subscription</h4>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-borderless table-sm">
                                    <tbody>
                                    <tr>
                                        <th class="th-sm">Plan</th>
                                        <td id="planId" class="card-title planId"></td>
                                    </tr>
                                    <tr>
                                        <th class="th-sm">Status
                                        </th>
                                        <td id="planStatus" class="card-title planStatus"></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                            <p class="form-text text-muted text-left">On clicking <b>Open Subscription Portal</b> you
                                will be
                                asked to enter the email address you registered with. <br/>An OTP will be sent this
                                account. Use this OTP to login and be taken to our Customer Portal. <br/>This is where
                                you can
                                update your details and make changes to your Subscription.</p>
                            <a href="javascript:void(0)" data-cb-type="portal" id="OpenPortal" name="OpenPortal"
                               class="text-center submit-btn btn btn-register btn-md">Open Subscription Portal</a>
                            <a href="javascript:CloseBrowser()" id="CloseBrowser" name="CloseBrowser"
                               class="text-center submit-btn btn close-btn btn-md">Close</a>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
<br/>
<div class="footer text-center">
    <span class="form-text text-muted rights">&copy; Warewolf. All Rights Reserved.</span>
</div>
</body>
</html>