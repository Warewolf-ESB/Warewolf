!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("angular-google-charts",["exports","@angular/core","rxjs","rxjs/operators"],e):e(t["angular-google-charts"]={},t.ng.core,t.rxjs,t.rxjs.operators)}(this,function(t,r,e,o){"use strict";function a(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var o,a,n=r.call(t),i=[];try{for(;(void 0===e||0<e--)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n["return"])&&r.call(n)}finally{if(a)throw a.error}}return i}function i(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t}var s=function(){function t(t){this.localeId=t,this.scriptSource="https://www.gstatic.com/charts/loader.js",this.onLoadSubject=new e.Subject,this.initialize()}return Object.defineProperty(t.prototype,"onReady",{get:function(){return this.doneLoading?e.Observable.create(function(t){t.next(!0),t.complete()}):this.onLoadSubject.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"doneLoading",{get:function(){return"undefined"!=typeof google},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){var e=this;return"undefined"==typeof google&&0<=Array.from(document.getElementsByTagName("script")).findIndex(function(t){return t.src===e.scriptSource})},enumerable:!0,configurable:!0}),t.prototype.loadChartPackages=function(r){var o=this;return e.Observable.create(function(t){var e={packages:r,language:o.localeId};google.charts.load("45.2",e),google.charts.setOnLoadCallback(function(){t.next(),t.complete()})})},t.prototype.initialize=function(){var t=this;if(!this.doneLoading&&!this.isLoading){var e=this.createScriptElement();e.onload=function(){t.onLoadSubject.next(!0),t.onLoadSubject.complete()},e.onerror=function(){console.error("Failed to load the google chart script!"),t.onLoadSubject.error("Failed to load the google chart script!"),t.onLoadSubject.complete()}}},t.prototype.createScriptElement=function(){var t=document.createElement("script");return t.type="text/javascript",t.src=this.scriptSource,t.async=!0,document.getElementsByTagName("head")[0].appendChild(t),t},t.decorators=[{type:r.Injectable}],t.ctorParameters=function(){return[{type:String,decorators:[{type:r.Inject,args:[r.LOCALE_ID]}]}]},t}(),c=function(){function e(){}return e.getPackageForChartName=function(t){return e.ChartTypesToPackages[t]},e.ChartTypesToPackages={AnnotationChart:"annotationchart",AreaChart:"corechart",Bar:"bar",BarChart:"corechart",BubbleChart:"corechart",Calendar:"calendar",CandlestickChart:"corechart",ColumnChart:"corechart",ComboChart:"corechart",PieChart:"corechart",Gantt:"gantt",Gauge:"gauge",GeoChart:"geochart",Histogram:"corechart",Line:"line",LineChart:"corechart",Map:"map",OrgChart:"orgchart",Sankey:"sankey",Scatter:"scatter",ScatterChart:"corechart",SteppedAreaChart:"corechart",Table:"table",Timeline:"timeline",TreeMap:"treemap",WordTree:"wordtree"},e}(),p=function(){function t(t,e){this.element=t,this.loaderService=e,this.roles=new Array,this.width=undefined,this.height=undefined,this.dynamicResize=!1,this.options={},this.error=new r.EventEmitter,this.ready=new r.EventEmitter,this.select=new r.EventEmitter,this.mouseenter=new r.EventEmitter,this.mouseleave=new r.EventEmitter}return t.prototype.ngOnInit=function(){var t=this;if(null==this.type)throw new Error("Can't create a Google Chart without specifying a type!");if(null==this.data)throw new Error("Can't create a Google Chart without data!");this.loaderService.onReady.subscribe(function(){t.createChart()})},t.prototype.ngAfterViewInit=function(){this.addResizeListener()},t.prototype.ngOnChanges=function(){this.wrapper&&this.updateChart()},Object.defineProperty(t.prototype,"parsedOptions",{get:function(){return function(){return n=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},n.apply(this,arguments)}({title:this.title,width:this.width,height:this.height},this.options)},enumerable:!0,configurable:!0}),t.prototype.getChartElement=function(){return this.element.nativeElement.firstElementChild},t.prototype.createChart=function(){var t=this;this.loadNeededPackages().subscribe(function(){t.wrapper=new google.visualization.ChartWrapper,t.updateChart()})},t.prototype.loadNeededPackages=function(){return this.loaderService.loadChartPackages([c.getPackageForChartName(this.type)])},t.prototype.updateChart=function(){var t=this.getDataTable();this.formatData(t),this.wrapper.setChartType(this.type),this.wrapper.setDataTable(t),this.wrapper.setOptions(this.parsedOptions),this.removeChartEvents(),this.registerChartEvents(),this.wrapper.draw(this.element.nativeElement)},t.prototype.getDataTable=function(){return this.columnNames?google.visualization.arrayToDataTable(i([i(this.columnNames,this.roles)],this.data),!1):google.visualization.arrayToDataTable(this.data,!0)},t.prototype.formatData=function(e){if(this.formatter)if(this.formatter instanceof Array)this.formatter.forEach(function(t){t.formatter.format(e,t.colIndex)});else for(var t=0;t<e.getNumberOfColumns();t++)this.formatter.format(e,t)},t.prototype.addResizeListener=function(){var t=this;e.fromEvent(window,"resize").pipe(o.debounceTime(100)).subscribe(function(){t.ngOnChanges()})},t.prototype.removeChartEvents=function(){google.visualization.events.removeAllListeners(this.wrapper)},t.prototype.registerChartEvents=function(){var e=this;this.registerChartEvent("ready",function(){return e.ready.emit("Chart Ready")}),this.registerChartEvent("error",function(t){return e.error.emit(t)}),this.registerChartEvent("select",function(){var t=e.wrapper.getChart().getSelection();e.select.emit(t)}),this.registerChartEvent("onmouseover",function(t){return e.mouseenter.emit(t)}),this.registerChartEvent("onmouseout",function(t){return e.mouseleave.emit(t)})},t.prototype.registerChartEvent=function(t,e){google.visualization.events.addListener(this.wrapper,t,e)},t.decorators=[{type:r.Component,args:[{selector:"google-chart",template:"",styles:[":host { width: fit-content; display: block; }"],exportAs:"google-chart",changeDetection:r.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:r.ElementRef},{type:s}]},t.propDecorators={data:[{type:r.Input}],columnNames:[{type:r.Input}],roles:[{type:r.Input}],title:[{type:r.Input}],width:[{type:r.Input}],height:[{type:r.Input}],dynamicResize:[{type:r.Input}],options:[{type:r.Input}],type:[{type:r.Input}],formatter:[{type:r.Input}],error:[{type:r.Output}],ready:[{type:r.Output}],select:[{type:r.Output}],mouseenter:[{type:r.Output}],mouseleave:[{type:r.Output}]},t}(),u=function(){function t(){}return t.decorators=[{type:r.NgModule,args:[{providers:[s],declarations:[p],exports:[p]}]}],t}();t.GoogleChartComponent=p,t.GoogleChartsModule=u,t.ScriptLoaderService=s,t.GoogleChartPackagesHelper=c,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular-google-charts.umd.min.js.map