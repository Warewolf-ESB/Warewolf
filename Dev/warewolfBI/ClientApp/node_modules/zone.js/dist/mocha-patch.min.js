!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(this,function(){"use strict";!function(n){function e(n,e,t){for(var r=function(r){var i=n[r];"function"==typeof i&&(n[r]=0===i.length?e(i):t(i),n[r].toString=function(){return i.toString()})},i=0;i<n.length;i++)r(i);return n}function t(n){var t=function(n){return function(){return s.run(n,this,arguments)}};return e(n,t)}function r(n){var t=function(n){return function(e){return a.run(n,this,[e])}},r=function(n){return function(){return a.run(n,this)}};return e(n,r,t)}function i(n){var t=function(n){return function(e){return p.run(n,this,[e])}},r=function(n){return function(){return p.run(n,this)}};return e(n,r,t)}var o=n.Mocha;if("undefined"==typeof o)throw new Error("Missing Mocha.js");if("undefined"==typeof Zone)throw new Error("Missing Zone.js");var u=Zone.ProxyZoneSpec,f=Zone.SyncTestZoneSpec;if(!u)throw new Error("Missing ProxyZoneSpec");if(o.__zone_patch__)throw new Error('"Mocha" has already been patched with "Zone".');o.__zone_patch__=!0;var c=Zone.current,s=c.fork(new f("Mocha.describe")),a=null,p=c.fork(new u),h={after:o.after,afterEach:o.afterEach,before:o.before,beforeEach:o.beforeEach,describe:o.describe,it:o.it};n.describe=n.suite=o.describe=function(){return h.describe.apply(this,t(arguments))},n.xdescribe=n.suite.skip=o.describe.skip=function(){return h.describe.skip.apply(this,t(arguments))},n.describe.only=n.suite.only=o.describe.only=function(){return h.describe.only.apply(this,t(arguments))},n.it=n.specify=n.test=o.it=function(){return h.it.apply(this,r(arguments))},n.xit=n.xspecify=o.it.skip=function(){return h.it.skip.apply(this,r(arguments))},n.it.only=n.test.only=o.it.only=function(){return h.it.only.apply(this,r(arguments))},n.after=n.suiteTeardown=o.after=function(){return h.after.apply(this,i(arguments))},n.afterEach=n.teardown=o.afterEach=function(){return h.afterEach.apply(this,r(arguments))},n.before=n.suiteSetup=o.before=function(){return h.before.apply(this,i(arguments))},n.beforeEach=n.setup=o.beforeEach=function(){return h.beforeEach.apply(this,r(arguments))},function(n,e){o.Runner.prototype.runTest=function(e){var t=this;Zone.current.scheduleMicroTask("mocha.forceTask",function(){n.call(t,e)})},o.Runner.prototype.run=function(n){return this.on("test",function(n){a=c.fork(new u)}),this.on("fail",function(n,e){var t=a&&a.get("ProxyZoneSpec");t&&e&&(e.message+=t.getAndClearPendingTasksInfo())}),e.call(this,n)}}(o.Runner.prototype.runTest,o.Runner.prototype.run)}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||global)});