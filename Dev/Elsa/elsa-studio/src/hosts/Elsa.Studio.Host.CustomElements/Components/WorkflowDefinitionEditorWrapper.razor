@using Elsa.Api.Client.Resources.WorkflowDefinitions.Models
@using Elsa.Studio.Workflows.Components.WorkflowDefinitionEditor.Components
@inherits BackendComponentBase

<ThemedComponentWrapper>
    <WorkflowDefinitionEditor DefinitionId="@DefinitionId" WorkflowDefinitionExecuted="WorkflowDefinitionExecuted" WorkflowDefinitionVersionSelected="WorkflowDefinitionVersionSelected"/>
</ThemedComponentWrapper>

@code
{
    /// <summary>
    /// The ID of the workflow definition to edit.
    /// </summary>
    [Parameter]
    public string DefinitionId { get; set; } = default!;

    /// <summary>An event that is invoked when a workflow definition has been executed.</summary>
    /// <remarks>The ID of the workflow instance is provided as the value to the event callback.</remarks>
    [Parameter]
    public EventCallback<string> WorkflowDefinitionExecuted { get; set; }
    
    /// <summary>
    /// Gets or sets the event that occurs when the workflow definition version is updated.
    /// </summary>
    [Parameter]
    public EventCallback<WorkflowDefinition> WorkflowDefinitionVersionSelected { get; set; }
    
    private WorkflowDefinitionEditor WorkflowDefinitionEditor { get; set; } = default!;
    
    /// <summary>
    /// Gets the currently selected workflow definition version.
    /// </summary>
    public WorkflowDefinition? GetSelectedWorkflowDefinitionVersion() => WorkflowDefinitionEditor.GetSelectedWorkflowDefinitionVersion();
}