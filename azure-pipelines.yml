# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
  batch: true

pool:
  name: Default

jobs:

- job: build
  displayName: 'Compile'

  steps:
  - task: PowerShell@2
    inputs:
      filePath: '$(Agent.BuildDirectory)/s/Compile.ps1'
      arguments: '-AcceptanceTesting -MSBuildPath "C:\Program Files\Microsoft Visual Studio\2022\Enterprise\MSBuild\Current\Bin\MSBuild.exe"'

  - task: DeleteFiles@1
    inputs:
      SourceFolder: '$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting'
      Contents: 'TestResults' 

  - script: "(robocopy \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Upload Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Bare Metal/Other Unit Tests.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Unit Tests'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'
      
- job: Zip_Tool_Specs
  displayName: 'Zip Tool Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Zip Tool Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Zip Tool Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Email_Tools_Specs
  displayName: 'Email Tools Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Email Tools Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Email Tools Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Resource_Tools_Specs
  displayName: 'Resource Tools Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Resource Tools Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Resource Tools Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: File_And_Folder_Copy_Tool_Specs
  displayName: 'File And Folder Copy Tool Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/File And Folder Copy Tool Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'File And Folder Copy Tool Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Data_Tools_Specs
  displayName: 'Data Tools Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Data Tools Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Data Tools Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Request_Service_Name_View_Models_Unit_Tests
  displayName: 'Request Service Name View Models Unit Tests'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Request Service Name View Models Unit Tests.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Request Service Name View Models Unit Tests'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Unzip_Tool_Specs_Validation
  displayName: 'Unzip Tool Specs Validation'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Unzip Tool Specs Validation.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Unzip Tool Specs Validation'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Recordset_Tools_Specs
  displayName: 'Recordset Tools Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Recordset Tools Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Recordset Tools Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: File_And_Folder_Rename_Tool_Specs
  displayName: 'File And Folder Rename Tool Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/File And Folder Rename Tool Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'File And Folder Rename Tool Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Other_Tools_Specs
  displayName: 'Other Tools Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Other Tools Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Other Tools Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: File_And_Folder_Move_Tool_Specs
  displayName: 'File And Folder Move Tool Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/File And Folder Move Tool Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'File And Folder Move Tool Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: File_Read_Tool_Specs
  displayName: 'File Read Tool Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/File Read Tool Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'File Read Tool Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Infrastructure_Unit_Tests
  displayName: 'Infrastructure Unit Tests'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Infrastructure Unit Tests.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Infrastructure Unit Tests'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: New_Folder_Read_Tool_Specs
  displayName: 'New Folder Read Tool Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/New Folder Read Tool Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'New Folder Read Tool Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Write_File_Tool_Specs
  displayName: 'Write File Tool Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Write File Tool Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Write File Tool Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Loop_Construct_Tools_Specs
  displayName: 'Loop Construct Tools Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Loop Construct Tools Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Loop Construct Tools Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Utility_Tools_Specs
  displayName: 'Utility Tools Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Utility Tools Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Utility Tools Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Folder_Read_Tool_Specs
  displayName: 'Folder Read Tool Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Folder Read Tool Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Folder Read Tool Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: SQL_Bulk_Insert_Tool_Specs
  displayName: 'SQL Bulk Insert Tool Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/SQL Bulk Insert Tool Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'SQL Bulk Insert Tool Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Control_Flow_Tools_Specs
  displayName: 'Control Flow Tools Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Control Flow Tools Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Control Flow Tools Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Studio_View_Models_Unit_Tests
  displayName: 'Studio View Models Unit Tests'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Studio View Models Unit Tests.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Studio View Models Unit Tests'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: File_And_Folder_Create_Tool_Specs
  displayName: 'File And Folder Create Tool Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/File And Folder Create Tool Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'File And Folder Create Tool Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Storage_Unit_Tests
  displayName: 'Storage Unit Tests'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Storage Unit Tests.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Storage Unit Tests'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Storage_Tools_Specs
  displayName: 'Storage Tools Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Storage Tools Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Storage Tools Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: File_And_Folder_Delete_Tool_Specs
  displayName: 'File And Folder Delete Tool Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/File And Folder Delete Tool Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'File And Folder Delete Tool Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Scripting_Tools_Specs
  displayName: 'Scripting Tools Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Scripting Tools Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Scripting Tools Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Database_Tools_Specs
  displayName: 'Database Tools Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Database Tools Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Database Tools Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Auditing_Unit_Tests
  displayName: 'Auditing Unit Tests'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Auditing Unit Tests.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Auditing Unit Tests'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Workflow_Execution_Specs
  displayName: 'Workflow Execution Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Workflow Execution Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Workflow Execution Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Studio_Test_Framework_With_Hello_World_Workflow_Specs
  displayName: 'Studio Test Framework With Hello World Workflow Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Studio Test Framework With Hello World Workflow Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Studio Test Framework With Hello World Workflow Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Studio_Test_Framework_With_Utility_Tools_Specs
  displayName: 'Studio Test Framework With Utility Tools Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Studio Test Framework With Utility Tools Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Studio Test Framework With Utility Tools Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: MS_SQL_Server_Specs
  displayName: 'MS SQL Server Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/MS SQL Server Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'MS SQL Server Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Studio_Test_Framework_With_Data_Tools_Specs
  displayName: 'Studio Test Framework With Data Tools Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Studio Test Framework With Data Tools Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Studio Test Framework With Data Tools Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Assign_Workflow_Execution_Specs
  displayName: 'Assign Workflow Execution Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Assign Workflow Execution Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Assign Workflow Execution Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Integration_Tests
  displayName: 'Integration Tests'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Integration Tests.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Integration Tests'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Studio_Test_Framework_With_Scripting_Tools_Specs
  displayName: 'Studio Test Framework With Scripting Tools Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Studio Test Framework With Scripting Tools Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Studio Test Framework With Scripting Tools Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Other_Activities_Specs
  displayName: 'Other Activities Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Other Activities Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Other Activities Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Studio_Test_Framework_With_File_And_Folder_Tools_Specs
  displayName: 'Studio Test Framework With File And Folder Tools Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Studio Test Framework With File And Folder Tools Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Studio Test Framework With File And Folder Tools Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Studio_Test_Framework_With_HTTP_Web_Tools_Specs
  displayName: 'Studio Test Framework With HTTP Web Tools Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Studio Test Framework With HTTP Web Tools Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Studio Test Framework With HTTP Web Tools Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Studio_Test_Framework_With_Subworkflow_Specs
  displayName: 'Studio Test Framework With Subworkflow Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Studio Test Framework With Subworkflow Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Studio Test Framework With Subworkflow Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Workflow_Merging_Specs
  displayName: 'Workflow Merging Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Workflow Merging Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Workflow Merging Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Example_Workflow_Execution_Specs
  displayName: 'Example Workflow Execution Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Example Workflow Execution Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Example Workflow Execution Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Studio_Test_Framework_Specs
  displayName: 'Studio Test Framework Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Studio Test Framework Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Studio Test Framework Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Subworkflow_Execution_Specs
  displayName: 'Subworkflow Execution Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Subworkflow Execution Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Subworkflow Execution Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Other_Specs
  displayName: 'Other Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Other Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Other Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Studio_Test_Framework_With_Deleted_Resources_Specs
  displayName: 'Studio Test Framework With Deleted Resources Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Studio Test Framework With Deleted Resources Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Studio Test Framework With Deleted Resources Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: SQL_Integration_Tests
  displayName: 'SQL Integration Tests'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/SQL Integration Tests.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'SQL Integration Tests'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: For_Each_Workflow_Execution_Specs
  displayName: 'For Each Workflow Execution Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/For Each Workflow Execution Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'For Each Workflow Execution Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Copy_Tool_Specs_From_Local
  displayName: 'Copy Tool Specs From Local'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Copy Tool Specs From Local.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Copy Tool Specs From Local'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Move_Tool_Specs_From_Local
  displayName: 'Move Tool Specs From Local'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Move Tool Specs From Local.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Move Tool Specs From Local'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Rename_Tool_Specs_From_Local
  displayName: 'Rename Tool Specs From Local'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Rename Tool Specs From Local.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Rename Tool Specs From Local'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Unzip_Tool_Specs_From_Local
  displayName: 'Unzip Tool Specs From Local'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Unzip Tool Specs From Local.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Unzip Tool Specs From Local'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Zip_Tool_Specs_From_Local
  displayName: 'Zip Tool Specs From Local'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Zip Tool Specs From Local.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Zip Tool Specs From Local'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Copy_Tool_Specs_From_FTP
  displayName: 'Copy Tool Specs From FTP'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Copy Tool Specs From FTP.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Zip Tool Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Move_Tool_Specs_From_FTP
  displayName: 'Move Tool Specs From FTP'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Move Tool Specs From FTP.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Move Tool Specs From FTP'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Rename_Tool_Specs_From_FTP
  displayName: 'Rename Tool Specs From FTP'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Rename Tool Specs From FTP.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Rename Tool Specs From FTP'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Unzip_Tool_Specs_From_FTP
  displayName: 'Unzip Tool Specs From FTP'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Unzip Tool Specs From FTP.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Unzip Tool Specs From FTP'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Zip_Tool_Specs_From_FTP
  displayName: 'Zip Tool Specs From FTP'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Zip Tool Specs From FTP.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Zip Tool Specs From FTP'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Copy_Tool_Specs_From_FTPS
  displayName: 'Copy Tool Specs From FTPS'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Copy Tool Specs From FTPS.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Copy Tool Specs From FTPS'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Move_Tool_Specs_From_FTPS
  displayName: 'Move Tool Specs From FTPS'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Move Tool Specs From FTPS.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Move Tool Specs From FTPS'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Rename_Tool_Specs_From_FTPS
  displayName: 'Rename Tool Specs From FTPS'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Rename Tool Specs From FTPS.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Rename Tool Specs From FTPS'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Unzip_Tool_Specs_From_FTPS
  displayName: 'Unzip Tool Specs From FTPS'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Unzip Tool Specs From FTPS.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Unzip Tool Specs From FTPS'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Zip_Tool_Specs_From_FTPS
  displayName: 'Zip Tool Specs From FTPS'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Zip Tool Specs From FTPS.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Zip Tool Specs From FTPS'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Copy_Tool_Specs_From_SFTP
  displayName: 'Copy Tool Specs From SFTP'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Copy Tool Specs From SFTP.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Copy Tool Specs From SFTP'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Move_Tool_Specs_From_SFTP
  displayName: 'Move Tool Specs From SFTP'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Move Tool Specs From SFTP.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Move Tool Specs From SFTP'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Rename_Tool_Specs_From_SFTP
  displayName: 'Rename Tool Specs From SFTP'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Rename Tool Specs From SFTP.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Rename Tool Specs From SFTP'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Unzip_Tool_Specs_From_SFTP
  displayName: 'Unzip Tool Specs From SFTP'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Unzip Tool Specs From SFTP.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Unzip Tool Specs From SFTP'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Zip_Tool_Specs_From_SFTP
  displayName: 'Zip Tool Specs From SFTP'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Zip Tool Specs From SFTP.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Zip Tool Specs From SFTP'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Copy_Tool_Specs_From_UNC
  displayName: 'Copy Tool Specs From UNC'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Copy Tool Specs From UNC.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Copy Tool Specs From UNC'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Move_Tool_Specs_From_UNC
  displayName: 'Move Tool Specs From UNC'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Move Tool Specs From UNC.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Move Tool Specs From UNC'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Studio_Core_Unit_Tests
  displayName: 'Studio Core Unit Tests'
  dependsOn: build
  pool: VM

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Bare Metal/Studio Core Unit Tests.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Studio Core Unit Tests'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Elasticsearch_View_Models_Unit_Tests
  displayName: 'Elasticsearch View Models Unit Tests'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Elasticsearch View Models Unit Tests.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Elasticsearch View Models Unit Tests'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Search_Specs
  displayName: 'Search Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Search Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Search Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Logger_Unit_Tests
  displayName: 'Logger Unit Tests'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Logger Unit Tests.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Logger Unit Tests'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Rename_Tool_Specs_From_UNC
  displayName: 'Rename Tool Specs From UNC'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Rename Tool Specs From UNC.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Rename Tool Specs From UNC'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Not_Parallelizable_Unit_Tests
  displayName: 'Not Parallelizable Unit Tests'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Bare Metal/Not Parallelizable Unit Tests.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Not Parallelizable Unit Tests'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Database_Workflow_Execution_Specs
  displayName: 'Database Workflow Execution Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Database Workflow Execution Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Database Workflow Execution Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: RabbitMQ_Workflow_Execution_Specs
  displayName: 'RabbitMQ Workflow Execution Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/RabbitMQ Workflow Execution Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'RabbitMQ Workflow Execution Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Studio_Test_Framework_With_HTTP_Web_Get_Tools_Specs
  displayName: 'Studio Test Framework With HTTP Web Get Tools Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Studio Test Framework With HTTP Web Get Tools Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Studio Test Framework With HTTP Web Get Tools Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Studio_Test_Framework_With_HTTP_Web_Delete_Tools_Specs
  displayName: 'Studio Test Framework With HTTP Web Delete Tools Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Studio Test Framework With HTTP Web Delete Tools Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Studio Test Framework With HTTP Web Delete Tools Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Studio_Test_Framework_With_HTTP_Web_Post_Tools_Specs
  displayName: 'Studio Test Framework With HTTP Web Post Tools Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Studio Test Framework With HTTP Web Post Tools Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Studio Test Framework With HTTP Web Post Tools Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Studio_Test_Framework_With_HTTP_Web_Put_Tools_Specs
  displayName: 'Studio Test Framework With HTTP Web Put Tools Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Studio Test Framework With HTTP Web Put Tools Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Studio Test Framework With HTTP Web Put Tools Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Studio_Test_Framework_With_RabbitMQ_Tools_Specs
  displayName: 'Studio Test Framework With RabbitMQ Tools Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Studio Test Framework With RabbitMQ Tools Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Studio Test Framework With RabbitMQ Tools Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Database_Subworkflow_Execution_Specs
  displayName: 'Database Subworkflow Execution Specs'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Container/Database Subworkflow Execution Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Database Subworkflow Execution Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Intellisense_Textbox_Visual_Tree_Unit_Tests
  displayName: 'Intellisense Textbox Visual Tree Unit Tests'
  dependsOn: build

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Bare Metal/Intellisense Textbox Visual Tree Unit Tests.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Intellisense Textbox Visual Tree Unit Tests'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: Workflow_Execution_Logging_Specs
  displayName: 'Workflow Execution Logging Specs'
  dependsOn: build
  pool: VM

  steps:
  - checkout: none

  - script: "(robocopy \"\\\\opswolf\\Azure Devops\\AcceptanceTesting $(Build.BuildId)\" \"$(Agent.BuildDirectory)\\s\\bin\\AcceptanceTesting\" /E /PURGE) ^& IF %ERRORLEVEL% LEQ 1 exit 0"
    displayName: 'Download Artifacts'

  - script: "\"$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/Job Shortcuts/Bare Metal/Workflow Execution Logging Specs.bat\""
    displayName: 'Run Tests'

  - task: PublishTestResults@2
    inputs:
      testRunner: VSTest
      testResultsFiles: '$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx'
      failTaskOnFailedTests: true
      testRunTitle: 'Workflow Execution Logging Specs'
      
  - script: 'if not exist "$(Agent.BuildDirectory)/s/bin/AcceptanceTesting/TestResults/*.trx" exit 1'

- job: build_release
  displayName: 'Compile for Release'
  dependsOn: [Zip_Tool_Specs,Email_Tools_Specs,Resource_Tools_Specs,File_And_Folder_Copy_Tool_Specs,Data_Tools_Specs,Request_Service_Name_View_Models_Unit_Tests,Unzip_Tool_Specs_Validation,Recordset_Tools_Specs,File_And_Folder_Rename_Tool_Specs,Other_Tools_Specs,File_And_Folder_Move_Tool_Specs,File_Read_Tool_Specs,Infrastructure_Unit_Tests,New_Folder_Read_Tool_Specs,Write_File_Tool_Specs,Loop_Construct_Tools_Specs,Utility_Tools_Specs,Folder_Read_Tool_Specs,SQL_Bulk_Insert_Tool_Specs,Control_Flow_Tools_Specs,Studio_View_Models_Unit_Tests,File_And_Folder_Create_Tool_Specs,Storage_Unit_Tests,Storage_Tools_Specs,File_And_Folder_Delete_Tool_Specs,Scripting_Tools_Specs,Database_Tools_Specs,Auditing_Unit_Tests,Workflow_Execution_Specs,Studio_Test_Framework_With_Hello_World_Workflow_Specs,Studio_Test_Framework_With_Utility_Tools_Specs,MS_SQL_Server_Specs,Studio_Test_Framework_With_Data_Tools_Specs,Assign_Workflow_Execution_Specs,Integration_Tests,Studio_Test_Framework_With_Scripting_Tools_Specs,Other_Activities_Specs,Studio_Test_Framework_With_File_And_Folder_Tools_Specs,Studio_Test_Framework_With_HTTP_Web_Tools_Specs,Studio_Test_Framework_With_Subworkflow_Specs,Workflow_Merging_Specs,Example_Workflow_Execution_Specs,Studio_Test_Framework_Specs,Subworkflow_Execution_Specs,Other_Specs,Studio_Test_Framework_With_Deleted_Resources_Specs,SQL_Integration_Tests,For_Each_Workflow_Execution_Specs,Copy_Tool_Specs_From_Local,Move_Tool_Specs_From_Local,Rename_Tool_Specs_From_Local,Unzip_Tool_Specs_From_Local,Zip_Tool_Specs_From_Local,Copy_Tool_Specs_From_FTP,Move_Tool_Specs_From_FTP,Rename_Tool_Specs_From_FTP,Unzip_Tool_Specs_From_FTP,Zip_Tool_Specs_From_FTP,Copy_Tool_Specs_From_FTPS,Move_Tool_Specs_From_FTPS,Rename_Tool_Specs_From_FTPS,Unzip_Tool_Specs_From_FTPS,Zip_Tool_Specs_From_FTPS,Copy_Tool_Specs_From_SFTP,Move_Tool_Specs_From_SFTP,Rename_Tool_Specs_From_SFTP,Unzip_Tool_Specs_From_SFTP,Zip_Tool_Specs_From_SFTP,Copy_Tool_Specs_From_UNC,Move_Tool_Specs_From_UNC,Studio_Core_Unit_Tests,Elasticsearch_View_Models_Unit_Tests,Search_Specs,Logger_Unit_Tests,Rename_Tool_Specs_From_UNC,Not_Parallelizable_Unit_Tests,Database_Workflow_Execution_Specs,RabbitMQ_Workflow_Execution_Specs,Studio_Test_Framework_With_HTTP_Web_Get_Tools_Specs,Studio_Test_Framework_With_HTTP_Web_Delete_Tools_Specs,Studio_Test_Framework_With_HTTP_Web_Post_Tools_Specs,Studio_Test_Framework_With_HTTP_Web_Put_Tools_Specs,Studio_Test_Framework_With_RabbitMQ_Tools_Specs,Database_Subworkflow_Execution_Specs,Intellisense_Textbox_Visual_Tree_Unit_Tests,Workflow_Execution_Logging_Specs]

  steps:
  - checkout: self
    clean: true
    persistCredentials: true

  - script: "powershell -NoProfile -NoLogo -ExecutionPolicy Bypass -NoExit -File \"$(Agent.BuildDirectory)/s/Compile.ps1\" -AcceptanceTesting -AutoVersion -Config Release -Target Rebuild -ProjectSpecificOutputs"
    displayName: 'Compile in Release Config'
    workingDirectory: '$(Agent.BuildDirectory)/s'

  - powershell: |
      Write-Host Testing Warewolf assembly file versions...
      $HighestReadVersion = "0.0.0.0"
      $LastReadVersion = "0.0.0.0"
      foreach ($file in Get-ChildItem -recurse "$(Agent.BuildDirectory)\s\Dev") {
          if (($file.Name.EndsWith(".dll") -or ($file.Name.EndsWith(".exe") -and -Not $file.Name.EndsWith(".vshost.exe"))) -and ($file.Name.StartsWith("Dev2.") -or $file.Name.StartsWith("Warewolf.") -or $file.Name.StartsWith("WareWolf")) -and $file.Name -ne "Warewolf.Usage.dll") {
              # Get version.
              $ReadVersion = [system.diagnostics.fileversioninfo]::GetVersionInfo($file.FullName).FileVersion
      
              # Find highest version
              $SeperateVersionNumbers = $ReadVersion.split(".")
              $SeperateVersionNumbersHighest = $HighestReadVersion.split(".")
              if ([convert]::ToInt32($SeperateVersionNumbers[0], 10) -gt [convert]::ToInt32($SeperateVersionNumbersHighest[0], 10)`
              -or [convert]::ToInt32($SeperateVersionNumbers[1], 10) -gt [convert]::ToInt32($SeperateVersionNumbersHighest[1], 10)`
              -or [convert]::ToInt32($SeperateVersionNumbers[2], 10) -gt [convert]::ToInt32($SeperateVersionNumbersHighest[2], 10)`
              -or [convert]::ToInt32($SeperateVersionNumbers[3], 10) -gt [convert]::ToInt32($SeperateVersionNumbersHighest[3], 10)){
                  $HighestReadVersion = $ReadVersion
              }
      
              # Check for invalid.
              if ($ReadVersion.StartsWith("0.0.") -or ($LastReadVersion -ne $ReadVersion -and $LastReadVersion -ne "0.0.0.0")) {
                  $getFullPath = $file.FullName
                  Write-Host ERROR! Invalid version! $getFullPath $ReadVersion $LastReadVersion
                  throw "ERROR! `"$getFullPath $ReadVersion`" is either an invalid version or not equal to `"$LastReadVersion`". All Warewolf assembly versions in `"$TestsPath`" must conform and cannot start with 0.0. or end with .0"
              }
              $LastReadVersion = $ReadVersion
          }
      }
      Out-File -LiteralPath "$(Agent.BuildDirectory)\s\Dev\Dev2.Server\bin\Release\net48\win\FullVersionString" -InputObject $HighestReadVersion -Encoding default -Force
      git -C "$(Build.SourcesDirectory)" tag $HighestReadVersion
      git -C "$(Build.SourcesDirectory)" push https://gitlab.com/warewolf/warewolf $HighestReadVersion
      Write-Host "##vso[build.updatebuildnumber]$(Build.BuildNumber) ($HighestReadVersion)"

  - task: PublishBuildArtifacts@1
    inputs:
      PathtoPublish: '$(Agent.BuildDirectory)\\s\\Dev\\Dev2.Server\\bin\\Release\\net48\\win'
      ArtifactName: 'Release Server'
      publishLocation: 'Container'
      StoreAsTar: false

  - task: PublishBuildArtifacts@1
    inputs:
      PathtoPublish: '$(Agent.BuildDirectory)\\s\\Dev\\Dev2.Studio\\bin\\Release\\net48\\win'
      ArtifactName: 'Release Studio'
      publishLocation: 'Container'
      StoreAsTar: false
